# 1 概述

## JS 开发中的问题

1. 使用了不存在的变量、函数或成员
2. 类型错误(把一个不确定的类型当做确定的类型处理)
3. 在使用 null 或 undefined 的成员

js 的原罪

-   js 语言本身的特性, 决定了该语言无法适应大型的复杂项目。
-   弱类型: 某个变量,可以随时更换类型。
-   解释性: 错误发生的时间, 是在运行时。

## TypeScript

TS 是 JS 的超集, 是一个可选的,静态的类型系统。

-   类型系统

对代码中所有的标识符(变量、函数、参数、返回值)进行类型检查。

-   可选的

学习曲线平滑

-   静态的

无论是浏览器,还是 node 环境,无法直接是被 ts 代码

> babel: es6 -> es5

> tsc: ts -> es

tsc: ts 编译器

静态: 类型检查发生的事件,在编译的时候, 而非运行时

TS 不参与运行时的类型检查

## TS 的常识

-   2012 年微软发布 (ES6, ES2015)
-   Anders Hejlsberg 负责开发 TS 项目
-   开源, 拥抱 ES 标准

## 额外的惊喜

有了类型检查,增强了面向对象的开发

js 中也有类和对象, js 支持面向对象开发。没有类型检查,很对面向对象的场景实现时有很多问题。

使用 TS 后, 可以编写出完善的面向对象代码。

# 2 在 node 中搭建开发环境

## 安装 typescript

默认情况下, TS 会做出下面集中假设:

1. 假设当前执行环境的是 dom
2. 如果代码中没有使用模块化语句 （import,export） 便认为代码是全局执行
3. 编译的目标代码是 ES3

有两种方式更改以上假设:

1. 使用 tsc 命令行,加上选项参数
2. 使用 ts 配置文件, 更改编译选项

## TS 的配置文件

使用了配置文件后, 使用 tsc 进行编译时,不能更上文件名,如果跟上文件名，会忽略配置文件

@types/node

@types 是一个 ts 官方的类型库, 其中包含了很多对 js 代码的类型描述

> jquery: 用 js 写的,没有类型检查
> 安装@types/jquery, 为 jquery 库添加类型定义

## 使用第三方库简化流程

ts-node: 将 ts 代码在内存中完成编译,同时完成运行
nodemon: 监测文件的变化

# 3 基本类型检查

## 3.1 类型约束和编译结果对比

### 如何进行类型约束

变量、函数的参数、函数的返回值的位置加上**类型**

ts 在很多场景可以完成类型推导

any: 表示任意类型, 对该类型, ts 不做任何检查

### 源代码和编译结果的差异

## 3.2 基本类型

-   number: 数字
-   string: 字符串
-   boolean: 布尔值
-   数组
-   object: 对象
-   null 和 undefined

null 和 undefined 是所有其它类型的子类型,他们可以赋值给其它类型

通过设置` "strictNullChecks": true`,可以获得更加严格的空类型检查, null 和 undefined 只能赋值给自身。
